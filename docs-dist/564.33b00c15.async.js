(self.webpackChunk_iauto_components=self.webpackChunk_iauto_components||[]).push([[564],{53364:function(Jl,Mn,m){"use strict";m.r(Mn),m.d(Mn,{NewTable:function(){return pl}});var ht=m(861),$=m.n(ht),gt=m(38416),xe=m.n(gt),yt=m(18698),Re=m.n(yt),Ct=m(27424),I=m.n(Ct),St=m(42122),s=m.n(St),mt=m(70215),sn=m.n(mt),He=m(73935),v=m(67294),xt=m(96486),a=m.n(xt),$n=m(20057),pt=m(98542),Ie=m(12461),Ge=m(48826),Xe=m(24016),te=m(71577),pe=m(34041),Pe=m(32808),jt=m(27049),Me=m(15322),wt=m(26713),bt=m(25968),Et=m(6226),Bn=m(14670),Dt=m(21640),Tt=m(89739),o=m(85893),Ln={fontWeight:700,color:"#000",textAlign:"left",fontSize:14,width:"100%"},Vn={color:"#888",textAlign:"left",fontSize:14,width:"100%"},Qe={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Ft={width:700,backgroundColor:"#f1fbf8",borderColor:"#17b88c",borderRadius:0},Ot={width:700,backgroundColor:"#fef0f1",borderColor:"#e60012",borderRadius:0},Rt={color:"#17b88c",fontSize:45,marginRight:20},Zt={color:"#e60012",fontSize:45,marginRight:20},Un={display:"flex",alignItems:"center"},Fe={error:function(e){var l=e.title,t=e.subTitle;Ie.ZP.open({icon:null,duration:1.5,className:"agul-message-content",content:(0,o.jsx)(Bn.Z,{style:Ot,closable:!0,description:(0,o.jsxs)("div",{style:Un,children:[(0,o.jsx)(Dt.Z,{style:Zt}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:s()(s()({},Ln),Qe),children:l}),t?(0,o.jsx)("div",{style:s()(s()({},Vn),Qe),children:t}):null]})]})})})},success:function(e){var l=e.title,t=e.subTitle;Ie.ZP.open({icon:null,duration:1.5,className:"agul-message-content",content:(0,o.jsx)(Bn.Z,{style:Ft,description:(0,o.jsxs)("div",{style:Un,children:[(0,o.jsx)(Tt.Z,{style:Rt}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:s()(s()({},Ln),Qe),children:l}),t?(0,o.jsx)("div",{style:s()(s()({},Vn),Qe),children:t}):null]})]})})})}},At=m(24969),Nt=m(86548),Hn=m(68795),cn=m(48689),kt=m(23430),It=m(74842),vn=m(93812),qe=m(77598),Jn=m(73250),fn=m(475),Wn=m(33437),Pt=function(e){var l=e.disabled,t=e.readOnly,i=e.value,u=e.onChange,r=e.addons,y=r.dataPath,C=r.removeErrorField,S=r.setErrorFields,b=a().get(e,"schema.props.placeholder","\u8BF7\u586B\u5165JSON\u683C\u5F0F\u7684\u6570\u636E"),j=(0,v.useState)(i),x=I()(j,2),N=x[0],J=x[1];(0,v.useEffect)(function(){J(i)},[i]);var F=function(w){J(w)},Z=function(w){if(w)try{var B=JSON.stringify(JSON.parse(w),null,"	");C(y),u(B)}catch(V){u(w),S([{name:y,error:["${title}\u5FC5\u987B\u662FJSON\u683C\u5F0F"]}])}};return(0,o.jsx)(fn.ZP,{value:N||"",readOnly:!!l||!!t,minHeight:"200px",maxHeight:"600px",placeholder:b,width:"100%",onChange:F,onBlur:function(){return Z(N)},extensions:[(0,Wn.AV)()]})},Mt=Pt,$t=pe.Z.Option,Bt=function(e){var l=e.value,t=e.onChange,i=e.datasource,u=e.reusableFeildValues;return(0,o.jsx)(pe.Z,{style:{width:"100%"},value:l,onChange:t,children:i.map(function(r){return(0,o.jsx)($t,{disabled:a().some(u,function(y){return(y==null?void 0:y.id)===JSON.stringify({id:r==null?void 0:r.id,type:r==null?void 0:r.type})}),value:JSON.stringify({id:r==null?void 0:r.id,type:r==null?void 0:r.type}),children:r==null?void 0:r.name},JSON.stringify({id:r==null?void 0:r.id,type:r==null?void 0:r.type}))})})},Lt=(0,v.memo)(Bt,function(d,e){return a().isEqual(d.reusableFeildValues,e.reusableFeildValues)&&a().isEqual(d.datasource,e.datasource)?d.value===e.value:!1}),Vt=function(e){var l=e.value,t=e.onChange,i=e.addons.getValues,u=a().get(i(),"scope",[]),r=a().get(i(),"trigger.parameters",[]);return(0,o.jsx)(Lt,{value:l,onChange:t,datasource:u,reusableFeildValues:r})},Ut=Vt,Ht=pe.Z.Option,Jt=function(e){var l=e.value,t=e.onChange,i=e.datasource,u=e.reusableFeildValues;return(0,o.jsx)(pe.Z,{style:{width:"100%"},value:l,onChange:t,children:i.map(function(r){return(0,o.jsx)(Ht,{disabled:a().some(u,function(y){return(y==null?void 0:y.id)===JSON.stringify({id:r==null?void 0:r.id,type:r==null?void 0:r.type})}),value:JSON.stringify({id:r==null?void 0:r.id,type:r==null?void 0:r.type}),children:r==null?void 0:r.name},JSON.stringify({id:r==null?void 0:r.id,type:r==null?void 0:r.type}))})})},Wt=(0,v.memo)(Jt,function(d,e){return a().isEqual(d.reusableFeildValues,e.reusableFeildValues)&&a().isEqual(d.datasource,e.datasource)?d.value===e.value:!1}),zt=function(e){var l=e.value,t=e.onChange,i=e.addons.getValues,u=a().uniqBy(a().reduce(a().get(i(),"scope",[]),function(y,C){return[].concat($()(y),$()(a().get(C,"id",[])))},[]),"id"),r=a().get(i(),"trigger.parameters",[]);return(0,o.jsx)(Wt,{value:l,onChange:t,datasource:u,reusableFeildValues:r})},Kt=zt,en=m(88306),_t=m(68788),Yt=m(61011),Gt=m(7938),Xt=m(26346),zn=en.Z.TreeNode;function hn(d,e){return d.map(function(l,t){return l.children?(0,o.jsx)(zn,{title:e&&a().includes(l==null?void 0:l.title,e)?(0,o.jsx)("span",{style:{color:"red"},children:l==null?void 0:l.title}):l==null?void 0:l.title,selectable:!1,checkable:!0,children:hn(l.children,e)},l==null?void 0:l.key):(0,o.jsx)(zn,{title:e&&a().includes(l==null?void 0:l.title,e)?(0,o.jsx)("span",{style:{color:"red"},children:l==null?void 0:l.title}):l==null?void 0:l.title,selectable:!1},l==null?void 0:l.key)})}function gn(d,e,l){var t=[];return a().forEach(a().cloneDeep(d),function(i){if(i!=null&&i.children){var u=[];a().includes(i==null?void 0:i.title,l)?(u=gn(i.children,e),u.length&&(l&&(i.title=(0,o.jsx)("span",{style:{color:"red"},children:i.title})),i.children=u,t.push(i))):(u=gn(i.children,e,l),u.length&&(i.children=u,t.push(i)))}else!a().includes(e,i.key)&&(!l||a().includes(i==null?void 0:i.title,l))&&(l&&a().includes(i==null?void 0:i.title,l)&&(i.title=(0,o.jsx)("span",{style:{color:"red"},children:i.title})),t.push(i))}),t}function yn(d,e,l){var t=[];return a().forEach(a().cloneDeep(d),function(i){if(i!=null&&i.children){var u=[];a().includes(i==null?void 0:i.title,l)?(u=yn(i.children,e),u.length&&(l&&(i.title=(0,o.jsx)("span",{style:{color:"red"},children:i.title})),i.children=u,t.push(i))):(u=yn(i.children,e,l),u.length&&(i.children=u,t.push(i)))}else a().includes(e,i==null?void 0:i.key)&&(!l||a().includes(i==null?void 0:i.title,l))&&(l&&a().includes(i==null?void 0:i.title,l)&&(i.title=(0,o.jsx)("span",{style:{color:"red"},children:i.title})),t.push(i))}),t}function Je(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=[];return a().forEach(d,function(t){t.id=t==null?void 0:t.key,t!=null&&t.children?(l=[].concat($()(l),$()(Je(t==null?void 0:t.children,e))),delete t.chidren):e.includes(t==null?void 0:t.key)&&(l=[].concat($()(l),[t]))}),l}var Qt=function(e){var l=e.treeData,t=l===void 0?[]:l,i=e.targetKeys,u=i===void 0?[]:i,r=e.disabled,y=r===void 0?!1:r,C=e.readOnly,S=C===void 0?!1:C,b=e.onChange,j=e.type,x=j===void 0?"tree":j,N=(0,v.useState)(a().map(u,function(z){return z==null?void 0:z.key})),J=I()(N,2),F=J[0],Z=J[1];(0,v.useEffect)(function(){Z(a().map(u,function(z){return(z==null?void 0:z.key)||(z==null?void 0:z.id)}))},[u]);var D=(0,v.useState)([]),w=I()(D,2),B=w[0],V=w[1],T=(0,v.useState)([]),P=I()(T,2),U=P[0],M=P[1],c=(0,v.useState)(!1),E=I()(c,2),A=E[0],L=E[1],H=(0,v.useState)(!1),re=I()(H,2),oe=re[0],Se=re[1],ye=(0,v.useState)(""),ne=I()(ye,2),Y=ne[0],ue=ne[1],ce=(0,v.useState)(""),ve=I()(ce,2),fe=ve[0],Ve=ve[1],ae=(0,v.useMemo)(function(){return a().cloneDeep(t)},[t]),K=(0,v.useMemo)(function(){return a().cloneDeep(t)},[t]),ee=(0,v.useMemo)(function(){return Je(K,F)},[K,F]),Q=function(){navigator.clipboard.readText().then(function(G){G=G.replace(/\r\n|\r/g,`
`);for(var Ce=G.split(`
`),Oe=new Array(Ce.length-1),he=0;he<Ce.length-1;he++){var Ae=Ce[he].split("	");Oe[he]=Ae}b&&b(Je(t,[].concat($()(F),$()(a().map(Oe,function(De){return a().get(De,[0])})))))}),console.log("22222222222222222")},X=function(){L(function(G){return!G})},le=function(){Se(function(G){return!G})},be=function(G){L(!1),Se(!1),V([]),M([]),b&&b(Je(t,[].concat($()(F),$()(G))))},Ee=function(G){L(!1),Se(!1),V([]),M([]),b&&b(Je(t,a().filter(F,function(Ce){return!a().includes(G,Ce)})))},Dn=function(G){var Ce=G.target.value;ue(a().trim(Ce))},an=function(G){var Ce=G.target.value;Ve(a().trim(Ce))},Tn=(0,v.useState)(!0),Ue=I()(Tn,2),ln=Ue[0],Ke=Ue[1];return(0,v.useEffect)(function(){Ke(!1),setTimeout(function(){Ke(!0)},0)},[F]),(0,o.jsxs)("div",{className:"agul-transfer",children:[(0,o.jsxs)("div",{className:"agul-transfer-left",children:[(0,o.jsxs)("div",{className:"agul-transfer-title",children:[null,(0,o.jsx)("span",{children:"\u5F85\u91C7\u96C6\u6570\u636E"}),S?null:(0,o.jsx)(Xe.Z,{style:{width:250},size:"small",onChange:Dn,allowClear:!0,disabled:y})]}),(0,o.jsx)("div",{className:"agul-transfer-content",children:a().isEmpty(t)?null:ln?(0,o.jsx)(en.Z,{checkable:!0,height:400,defaultExpandAll:!0,checkedKeys:B,selectable:!1,onCheck:function(G){V(G)},children:hn(gn(t,F),Y)}):null})]}),(0,o.jsxs)("div",{className:"agul-transfer-center",children:[B!=null&&B.length&&!S&&!y?(0,o.jsx)(_t.Z,{className:"agul-transfer-center-button",onClick:function(){return be(B)}}):(0,o.jsx)(Yt.Z,{className:"agul-transfer-center-disabled-button"}),U!=null&&U.length&&!S&&!y?(0,o.jsx)(Gt.Z,{className:"agul-transfer-center-button",onClick:function(){return Ee(U)}}):(0,o.jsx)(Xt.Z,{className:"agul-transfer-center-disabled-button"})]}),(0,o.jsx)("div",{className:"agul-transfer-right",children:x==="tree"?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"agul-transfer-title",children:[null,(0,o.jsx)("span",{children:"\u5DF2\u91C7\u96C6\u6570\u636E"}),S?null:(0,o.jsx)(Xe.Z,{style:{width:250},size:"small",onChange:an,allowClear:!0,disabled:y}),(0,o.jsx)(te.Z,{onClick:Q,style:{float:"right"},children:"\u91C7\u96C6\u6570\u636E\u7C98\u8D34"})]}),(0,o.jsx)("div",{className:"agul-transfer-content",children:a().isEmpty(t)?null:ln?(0,o.jsx)(en.Z,{checkable:!0,height:400,defaultExpandAll:!0,checkedKeys:U,selectable:!1,onCheck:function(G){M(G)},children:hn(yn(t,F),fe)}):null})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"agul-transfer-title",children:(0,o.jsx)("span",{children:"\u5DF2\u91C7\u96C6\u6570\u636E"})}),a().map(ee,function(z){return(0,o.jsx)("div",{className:"agul-transfer-list",children:S?(0,o.jsx)("span",{children:z.title}):(0,o.jsx)(Pe.Z,{disabled:y,onChange:function(Ce){return M(function(Oe){return Ce.target.checked?[].concat($()(Oe),[z.key]):a().filter(Oe,function(he){return he!==z.key})})},children:z.title})})})]})})]})},qt=Qt,ea=m(17061),nn=m.n(ea),na=m(17156),Kn=m.n(na),ta=m(11238),aa={200:"\u670D\u52A1\u5668\u6210\u529F\u8FD4\u56DE\u8BF7\u6C42\u7684\u6570\u636E\u3002",201:"\u65B0\u5EFA\u6216\u4FEE\u6539\u6570\u636E\u6210\u529F\u3002",202:"\u4E00\u4E2A\u8BF7\u6C42\u5DF2\u7ECF\u8FDB\u5165\u540E\u53F0\u6392\u961F\uFF08\u5F02\u6B65\u4EFB\u52A1\uFF09\u3002",204:"\u5220\u9664\u6570\u636E\u6210\u529F\u3002",400:"\u53D1\u51FA\u7684\u8BF7\u6C42\u6709\u9519\u8BEF\uFF0C\u670D\u52A1\u5668\u6CA1\u6709\u8FDB\u884C\u65B0\u5EFA\u6216\u4FEE\u6539\u6570\u636E\u7684\u64CD\u4F5C\u3002",401:"\u7528\u6237\u6CA1\u6709\u6743\u9650\uFF08\u4EE4\u724C\u3001\u7528\u6237\u540D\u3001\u5BC6\u7801\u9519\u8BEF\uFF09\u3002",403:"\u7528\u6237\u5F97\u5230\u6388\u6743\uFF0C\u4F46\u662F\u8BBF\u95EE\u662F\u88AB\u7981\u6B62\u7684\u3002",404:"\u53D1\u51FA\u7684\u8BF7\u6C42\u9488\u5BF9\u7684\u662F\u4E0D\u5B58\u5728\u7684\u8BB0\u5F55\uFF0C\u670D\u52A1\u5668\u6CA1\u6709\u8FDB\u884C\u64CD\u4F5C\u3002",500:"\u670D\u52A1\u5668\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5668\u3002",502:"\u7F51\u5173\u9519\u8BEF\u3002",503:"\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5668\u6682\u65F6\u8FC7\u8F7D\u6216\u7EF4\u62A4\u3002",504:"\u7F51\u5173\u8D85\u65F6\u3002"},la=function(){var d=Kn()(nn()().mark(function e(l){var t,i,u,r,y;return nn()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(t=l.response,(t==null?void 0:t.status)!==500){S.next=10;break}return S.next=4,t.json();case 4:if(i=S.sent,i.error.code!=="business.home.protocol.update.status.err"){S.next=7;break}return S.abrupt("return",i);case 7:Fe.error({title:i==null?void 0:i.error.message}),S.next=11;break;case 10:t!=null&&t.status?(u=aa[t.status]||t.statusText,r=t.status,y=t.url,Fe.error({title:"\u8BF7\u6C42\u9519\u8BEF ".concat(r,": ").concat(y),subTitle:u})):t||Fe.error({title:"\u7F51\u7EDC\u5F02\u5E38",subTitle:"\u60A8\u7684\u7F51\u7EDC\u53D1\u751F\u5F02\u5E38\uFF0C\u65E0\u6CD5\u8FDE\u63A5\u670D\u52A1\u5668"});case 11:throw console.error(l),l;case 13:case"end":return S.stop()}},e)}));return function(l){return d.apply(this,arguments)}}(),Cn=(0,ta.l7)({prefix:"",errorHandler:la,credentials:"include"});Cn.interceptors.request.use(function(d,e){return{url:d,options:s()(s()({},e),{},{interceptors:!0})}}),Cn.interceptors.response.use(function(){var d=Kn()(nn()().mark(function e(l){return nn()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",l);case 1:case"end":return i.stop()}},e)}));return function(e){return d.apply(this,arguments)}}());var se=Cn,_n=null,Yn=(0,v.createContext)(null);function Wl(){var d=React.useContext(_n);if(d===void 0)throw new Error("\u5FC5\u987B\u5728 globalProvider \u5185\u4F7F\u7528 useGlobalState");return d}function ra(){var d=v.useContext(Yn);if(d===void 0)throw new Error("\u5FC5\u987B\u5728 globalProvider \u5185\u4F7F\u7528 useGlobalDispatch");return d}var zl=function(e){var l=e.children,t=e.data,i=React.useState(t),u=_slicedToArray(i,2),r=u[0],y=u[1];return _jsx(_n.Provider,{value:r,children:_jsx(Yn.Provider,{value:y,children:l})})},Gn=(0,v.createContext)(void 0),Kl=null,je=(0,v.createContext)(void 0),oa=m(30381),We=m.n(oa),_l=m(7869),ia=8,Xn=function(e){this.capacity=e,this.cache=[]};Xn.prototype.get=function(d){var e=this.cache.findIndex(function(t){return t.key===d});if(e===-1)return-1;var l=this.cache[e].value;return this.cache.splice(e,1),this.cache.unshift({key:d,value:l}),l},Xn.prototype.put=function(d,e){var l=this.cache.findIndex(function(t){return t.key===d});l>-1?this.cache.splice(l,1):this.cache.length>=this.capacity&&this.cache.pop(),this.cache.unshift({key:d,value:e})};var Yl={set:function(e,l){try{sessionStorage.setItem(e,l)}catch(t){return!1}return!0},get:function(e){sessionStorage.getItem(e)},remove:function(e){sessionStorage.removeItem(e)},clear:function(){sessionStorage.clear()}},$e=function(e){return e?We()(e).utcOffset(ia):""},Gl=function(e){return"\u603B\u5171 ".concat(e," \u4E2A\u9879\u76EE")},Xl=function(e){for(var l=JSON.parse(JSON.stringify(e)),t=0,i=Object.keys(l);t<i.length;t++){var u=i[t];(l[u]===null||l[u]==="")&&delete l[u]}return l},Ql=function(e){var l={};e.forEach(function(i){l[i.id]=i});var t=[];return e.forEach(function(i){var u=l[i.parentId];u?((u.children||(u.children=[])).push(i),u.count=(u.count||(u.count=0))+1):t.push(i)}),t},ql=function d(e,l){var t=cloneDeep(e),i=[];return t.forEach(function(u){if(u.key=u.id,u.parentId===l){var r=d(t,u.id);r.length&&(u.children=r),i.push(u)}}),i},da=function d(e,l,t){var i=cloneDeep(e),u=[],r=t+1;return i.forEach(function(y){if(y.key=y.id,y.level=r,y.parentId===l){var C=d(i,y.id,r);C.length&&(y.children=C),u.push(y)}}),u},er=function(e){var l=cloneDeep(e),t=[],i=da(l,-1,1);return l.forEach(function(u){u.parentId===-2&&t.push(_objectSpread(_objectSpread({},u),{},{key:u.id,children:i,level:1}))}),t},nr=function d(e,l){e.forEach(function(t){l.push(t),t.children&&d(t.children,l)})},tr=function(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FORMAT_DATETIME;return moment(e).isValid()?moment($e(e)).format(l):""},ge=function(e){return e!==void 0?e.toString():""},ar=function(e){return new Promise(function(l,t){e||t(new Error);var i={serviceInterface_definition:[],dataType_definition:[],service_deployment:[],sd_parameters:[]},u=["server_name","server_id","server_description","service_name_space","service_major_version","service_minor_version","interface_major_version","interface_minor_version","api_name","api_description","service_interface_element_type","service_Interface_element_id","event_group","L4_Protocol","parameter_name","parameter_description","parameter_direction","data_type_reference","remark"],r=["data_type_name","data_type_description","data_type_name_space","data_type_category","struct_union_member_position","struct_union_member_name","struct_union_member_description","struct_union_member_data_type_reference","array_element_data_type_reference","string_array_length_type","string_array_length_min","string_array_length_max","base_type","min_value_physical","max_value_physical","initial_value","invalid_value","unit","table_value","remark"],y=["paticipant","ipv_4","ip_subnet_mask","vlan_id","service_name","service_id","provided_service_instance_id","consumed_service_instance_id","l_4_protocol","port","eventgroups","multicast_ip_port","sd_parameter_configuration"],C=["sd_parameters_name","type","initial_delay_min","initial_delay_max","repetitions_base_delay","reperirions_max","request_response_delay","cyclic_offer_delay","sd_port","sd_multicast_ip","ttl"],S=new FileReader;S.onload=function(b){try{var j,x=b==null||(j=b.target)===null||j===void 0?void 0:j.result,N=XLSX.read(x,{type:"binary"}),J=[],F=["ServiceInterface Definition","DataType Definition","Service Deployment","SD Parameters"];if(J=N.SheetNames,!J.toString().includes(F.toString()))t(new Error("\u6587\u4EF6\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E,\u8BF7\u68C0\u67E5\u6587\u4EF6!"));else{for(var Z in N.Sheets){if(Z==="ServiceInterface Definition"){var D=XLSX.utils.sheet_to_json(N.Sheets["ServiceInterface Definition"],{header:u}),w=D.splice(1);w.map(function(c){c.service_major_version=ge(c.service_major_version),c.service_minor_version=ge(c.service_minor_version),c.interface_major_version=ge(c.interface_major_version),c.interface_minor_version=ge(c.interface_minor_version)}),i.serviceInterface_definition=w}if(Z==="DataType Definition"){var B=XLSX.utils.sheet_to_json(N.Sheets["DataType Definition"],{header:r}),V=B.splice(1);i.dataType_definition=V}if(Z==="Service Deployment"){var T=XLSX.utils.sheet_to_json(N.Sheets["Service Deployment"],{header:y}),P=T.splice(1);P.map(function(c){c.provided_service_instance_id=ge(c.provided_service_instance_id),c.port=ge(c.port)}),i.service_deployment=P}if(Z==="SD Parameters"){var U=XLSX.utils.sheet_to_json(N.Sheets["SD Parameters"],{header:C}),M=U.splice(1);M.map(function(c){c.initial_delay_min=ge(c.initial_delay_min),c.initial_delay_max=ge(c.initial_delay_max),c.repetitions_base_delay=ge(c.repetitions_base_delay),c.cyclic_offer_delay=ge(c.cyclic_offer_delay),c.sd_port=ge(c.sd_port),c.reperirions_max=ge(c.reperirions_max),c.ttl=ge(c.ttl)}),i.sd_parameters=M}}l(i)}}catch(c){console.log(c),t(new Error("\u6587\u4EF6\u7C7B\u578B\u4E0D\u6B63\u786E\uFF01"))}},S.readAsBinaryString(e)})};function Sn(d,e,l){return a().map(d,function(t){return t!=null&&t.children?(t.title=t[e],t.key=t[l],t.children=Sn(t.children,e,l)):(t.title=t[e],t.key=t[l]),t})}function lr(d){if(!d)return"";var e={},l=[],t="",i="";try{var u=[];if(d.indexOf("?")>=0&&(u=d.substring(d.indexOf("?")+1,d.length).split("&")),u.length>0)for(var r in u)t=(l=u[r].split("="))[0],i=l[1],e[t]=i}catch(y){e={}}return e}var ua=(0,v.memo)(qt,function(d,e){return a().isEqual(d.treeData,e.treeData)&&a().isEqual(d.targetKeys,e.targetKeys)?d.updateMark===e.updateMark:!1}),sa=function(e){var l=e.type,t=l===void 0?"tree":l,i=e.disabled,u=e.value,r=e.schema.treeData,y=e.addons,C=(0,v.useState)([]),S=I()(C,2),b=S[0],j=S[1],x=y.getValues,N=y.setValues,J=y.dataPath,F=x(),Z=F.anyFeild,D=(0,v.useState)({}),w=I()(D,2),B=w[0],V=w[1],T=function(E){var A=x();a().set(A,"trigger.parameters",[]),a().set(A,J,E),N(A),V({})},P=(0,v.useContext)(je),U=a().get(P,"requestHeaders",{})||{};(0,vn.Z)(function(){Z&&se(r==null?void 0:r.url,{method:"get",params:{carTypeCode:a().get(Z,[1])},headers:s()({},U)}).then(function(c){var E=a().get(c,r==null?void 0:r.path,[]);E&&j(Sn(E,r==null?void 0:r.labelFeild,r==null?void 0:r.valueFeild))}).catch(function(c){j([])})},[Z]);var M=u||[];return(0,o.jsx)(ua,{updateMark:B,treeData:b,targetKeys:M,disabled:i,onChange:T,type:t})},ca=sa,va=m(45239),fa={width:"100%",display:"flex"},ha={flexGrow:"1"};function Qn(d,e,l){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return a().forEach(e,function(){for(var i=0;i<d.length;i++){var u=d[i];u.label=u[e[t]],u.value=u[l[t]],t<e.length-1&&(a().isEmpty(u.children)?(d.splice(i,1),i--):u.children=Qn(u.children,e,l,t+1))}}),d}var ga=function(e){var l=e.addons.getFieldError,t=e.schema,i=t.treeData,u=t.$id,r=e.disabled,y=e.onChange,C=e.value,S=e.placeholder,b=(0,v.useState)([]),j=I()(b,2),x=j[0],N=j[1],J=(0,v.useState)(!1),F=I()(J,2),Z=F[0],D=F[1],w=(0,v.useContext)(je),B=a().get(w,"requestHeaders",{})||{};(0,v.useEffect)(function(){D(!0),se(i==null?void 0:i.url,{method:"get",headers:s()({},B)}).then(function(T){D(!1);var P=a().get(T,i==null?void 0:i.path,[]);P&&N(Qn(P,i==null?void 0:i.labelFeilds,i==null?void 0:i.valueFeilds))}).catch(function(T){D(!1),console.log(T)})},[]);var V=function(P){y(P||void 0)};return(0,o.jsx)("div",{id:"agul-ui-newform-cascader-container",style:fa,children:(0,o.jsx)(va.Z,{status:a().isEmpty(l(u))?"":"error",options:x,value:C,onChange:V,style:ha,disabled:r,placeholder:S,loading:Z})})},ya=ga,Ca=function(e){var l=e.onChange,t=e.value,i=e.disabled,u=e.schema,r=u.treeData,y=u.dependencies,C=e.addons,S=C.dependValues,b=C.isFieldsTouched,j=function(V){l(V)},x=(0,v.useState)([]),N=I()(x,2),J=N[0],F=N[1],Z=(0,v.useContext)(je),D=a().get(Z,"requestHeaders",{})||{},w=function(){var V=r!=null&&r.params?r==null?void 0:r.params:{};a().forEach(y,function(T,P){S[P]&&a().set(V,a().last(T.split(".")),S[P])}),se(r==null?void 0:r.url,{method:"get",params:V,headers:s()({},D)}).then(function(T){var P=a().get(T,r==null?void 0:r.path,[]);P&&F(Sn(P,r==null?void 0:r.labelFeild,r==null?void 0:r.valueFeild))}).catch(function(T){F([])})};return(0,v.useEffect)(function(){w()},[]),(0,qe.Z)(function(){b()&&l(void 0),w()},S),(0,o.jsx)(en.Z,{rootStyle:{width:"100%"},checkable:!0,disabled:i,height:400,defaultExpandAll:!0,checkedKeys:t,selectable:!1,onCheck:j,treeData:J})},Sa=Ca;function ma(d,e){var l={};return a().forEach(e,function(t){l[t]=d[t]}),JSON.stringify(l)}var xa=function(e){var l=e.onChange,t=e.value,i=e.disabled,u=e.schema,r=u.treeData,y=u.dependencies,C=e.addons,S=C.dataPath,b=C.getFieldError,j=C.dependValues,x=C.isFieldsTouched,N=e.allowClear,J=e.placeholder,F=(0,v.useState)([]),Z=I()(F,2),D=Z[0],w=Z[1],B=(0,v.useState)(!1),V=I()(B,2),T=V[0],P=V[1],U=(0,v.useContext)(je),M=a().get(U,"requestHeaders",{})||{},c=function(){var A=r!=null&&r.params?r==null?void 0:r.params:{};a().forEach(y,function(L,H){j[H]&&a().set(A,a().last(L.split(".")),j[H])}),P(!0),se(r==null?void 0:r.url,{method:"get",params:A,headers:s()({},M)}).then(function(L){var H=a().map(a().get(L,(r==null?void 0:r.path)||"data",[]),function(re){return{label:String(a().get(re,(r==null?void 0:r.labelFeild)||"name")),value:a().isArray(r==null?void 0:r.valueFeild)?ma(re,r==null?void 0:r.valueFeild):String(a().get(re,(r==null?void 0:r.valueFeild)||"id"))}});w(H),P(!1)}).catch(function(L){P(!1),w([])})};return(0,v.useEffect)(function(){c()},[]),(0,qe.Z)(function(){x()&&l(void 0),c()},j),(0,o.jsx)(pe.Z,{status:a().isEmpty(b(S))?"":"error",style:{width:"100%"},value:t,onChange:l,disabled:i,options:D,allowClear:!!N,placeholder:J,loading:T})},pa=xa,ja=function(e){var l=e.onChange,t=e.value,i=e.disabled,u=e.schema,r=u.treeData,y=u.dependencies,C=e.addons,S=C.dataPath,b=C.getFieldError,j=C.dependValues,x=C.isFieldsTouched,N=e.allowClear,J=e.placeholder,F=(0,v.useState)(!1),Z=I()(F,2),D=Z[0],w=Z[1],B=(0,v.useState)([]),V=I()(B,2),T=V[0],P=V[1],U=(0,v.useContext)(je),M=a().get(U,"requestHeaders",{})||{},c=function(){var A=r!=null&&r.params?r==null?void 0:r.params:{};a().forEach(y,function(L,H){j[H]&&a().set(A,a().last(L.split(".")),j[H])}),w(!0),se(r==null?void 0:r.url,{method:"get",params:A,headers:s()({},M)}).then(function(L){var H=a().map(a().get(L,(r==null?void 0:r.path)||"data",[]),function(re){return{label:String(a().get(re,(r==null?void 0:r.labelFeild)||"name")),value:Number(a().get(re,(r==null?void 0:r.valueFeild)||"id"))}});P(H),w(!1)}).catch(function(L){P([]),w(!1)})};return(0,v.useEffect)(function(){c()},[]),(0,qe.Z)(function(){x()&&l(void 0),c()},j),(0,o.jsx)(pe.Z,{status:a().isEmpty(b(S))?"":"error",style:{width:"100%"},value:t,onChange:l,disabled:i,options:T,allowClear:!!N,placeholder:J,loading:D})},wa=ja;function qn(d){var e=[];return a().forEach(d,function(l){if(l!=null&&l.children)e=[].concat($()(e),$()(qn(l==null?void 0:l.children)));else{var t={id:a().get(l,"uid"),name:a().get(l,"name"),type:a().get(l,"type")};e=[].concat($()(e),[t])}}),e=a().sortBy(e,function(l){return l==null?void 0:l.id}),e}function et(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=[];return a().forEach(d,function(t){if(t!=null&&t.children)l.push({value:JSON.stringify(qn(t==null?void 0:t.children)),label:"".concat(e).concat(t==null?void 0:t.name,".*")}),l=[].concat($()(l),$()(et(t==null?void 0:t.children,"".concat(e).concat(t==null?void 0:t.name,"."))));else{var i={id:a().get(t,"uid"),name:a().get(t,"name"),type:a().get(t,"type")};l=[].concat($()(l),[{value:JSON.stringify([i]),label:"".concat(e).concat(t==null?void 0:t.name)}])}}),l}var ba={width:"100%"},Ea=function(e){var l=e.disabled,t=e.value,i=e.addons,u=e.onChange,r=i.getValues,y=r(),C=y.anyFeild,S=(0,v.useState)([]),b=I()(S,2),j=b[0],x=b[1],N=(0,v.useState)(""),J=I()(N,2),F=J[0],Z=J[1],D=(0,v.useState)(!1),w=I()(D,2),B=w[0],V=w[1];(0,v.useEffect)(function(){var c=t?a().sortBy(a().map(t,function(E){return{id:a().get(E,"id"),name:a().get(E,"name"),type:a().get(E,"type")}}),function(E){return E==null?void 0:E.id}):void 0;Z(c?JSON.stringify(c):void 0)},[t]);var T=(0,v.useContext)(je),P=a().get(T,"requestHeaders",{})||{},U=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a().get(C,[1]);V(!1),se("/daq-collectable-ms/v1/admin/datatype/_tree",{method:"get",params:{carTypeCode:E},headers:s()({},P)}).then(function(A){var L=a().get(A,"data",[]);L&&x(a().uniqBy(et(L),"value")),V(!0)}).catch(function(A){V(!0)})};(0,vn.Z)(function(){C&&U(a().get(C,[1]))},[C]);var M=function(E){u(E?JSON.parse(E):void 0)};return B?(0,o.jsx)("div",{id:"agul-ui-newform-strategyscope-select-container",style:{width:"100%"},children:(0,o.jsx)(pe.Z,{value:F,style:ba,showSearch:!0,placeholder:"\u9009\u62E9\u4FE1\u53F7",optionFilterProp:"label",filterOption:function(E,A){var L;return((L=A==null?void 0:A.label)!==null&&L!==void 0?L:"").toLowerCase().includes(E.toLowerCase())},onChange:M,options:j,disabled:l,allowClear:!0})}):null},Da=Ea;function Ta(d,e){var l={};return a().forEach(e,function(t){l[t]=d[t]}),JSON.stringify(l)}var Fa=function(e){var l=e.onChange,t=e.value,i=e.disabled,u=e.schema,r=u.treeData,y=u.dependencies,C=e.addons,S=C.dataPath,b=C.getFieldError,j=C.dependValues,x=e.allowClear,N=e.placeholder,J=(0,v.useContext)(je),F=a().get(J,"requestHeaders",{})||{},Z=(0,v.useState)([]),D=I()(Z,2),w=D[0],B=D[1],V=function(M){var c=r!=null&&r.params?r==null?void 0:r.params:{};a().forEach(y,function(E,A){j[A]&&a().set(c,a().last(E.split(".")),j[A])}),a().set(c,r!=null&&r.keywordFeild?r==null?void 0:r.keywordFeild:"keyword",M),se(r==null?void 0:r.url,{method:"get",params:c,headers:s()({},F)}).then(function(E){var A=a().map(a().get(E,(r==null?void 0:r.path)||"data",[]),function(L){return{label:String(a().get(L,(r==null?void 0:r.labelFeild)||"name")),value:a().isArray(r==null?void 0:r.valueFeild)?Ta(L,r==null?void 0:r.valueFeild):String(a().get(L,(r==null?void 0:r.valueFeild)||"id"))}});B(A)}).catch(function(){B([])})},T=function(M){M?V(M):B([])},P=function(M){l(M)};return(0,o.jsx)(pe.Z,{status:a().isEmpty(b(S))?"":"error",showSearch:!0,style:{width:"100%"},value:t,placeholder:N,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:a().debounce(T,200),onChange:P,notFoundContent:null,options:w,disabled:i,allowClear:x})},Oa=Fa,Ra=function(e){var l=e.disabled,t=e.readOnly,i=e.value,u=e.onChange,r=a().get(e,"schema.props.placeholder","\u8BF7\u586B\u5165\u6307\u5B9A\u683C\u5F0F\u7684\u6570\u636E");return(0,o.jsx)("div",{className:"agul-ui-newform-widget-code-editor",children:(0,o.jsx)(fn.ZP,{value:i||"",editable:!l&&!t,height:"200px",maxHeight:"400px",placeholder:r,width:"100%",onChange:u,className:"code-editor-content"})})},Za=Ra;function mn(d){var e=a().get(d,"action.submit",function(){}),l=[e];return a().forEach(d==null?void 0:d.properties,function(t){var i,u;if(t!=null&&(i=t.action)!==null&&i!==void 0&&i.submit){var r;l=[].concat($()(l),[t==null||(r=t.action)===null||r===void 0?void 0:r.submit])}(t==null?void 0:t.type)==="array"&&t!==null&&t!==void 0&&(u=t.items)!==null&&u!==void 0&&u.properties?l=[].concat($()(l),$()(mn(t==null?void 0:t.items))):(t==null?void 0:t.type)==="object"&&t!==null&&t!==void 0&&t.properties&&(l=[].concat($()(l),$()(mn(t))))}),l}function xn(d){var e=a().get(d,"action.init",function(){}),l=[e];return a().forEach(d==null?void 0:d.properties,function(t){var i,u;if(t!=null&&(i=t.action)!==null&&i!==void 0&&i.init){var r;l=[].concat($()(l),[t==null||(r=t.action)===null||r===void 0?void 0:r.init])}(t==null?void 0:t.type)==="array"&&t!==null&&t!==void 0&&(u=t.items)!==null&&u!==void 0&&u.properties?l=[].concat($()(l),$()(xn(t==null?void 0:t.items))):(t==null?void 0:t.type)==="object"&&t!==null&&t!==void 0&&t.properties&&(l=[].concat($()(l),$()(xn(t))))}),l}function pn(d){var e=a().get(d,"action.change",function(){}),l=[e];return a().forEach(d==null?void 0:d.properties,function(t){var i,u;if(t!=null&&(i=t.action)!==null&&i!==void 0&&i.change){var r;l=[].concat($()(l),[t==null||(r=t.action)===null||r===void 0?void 0:r.change])}(t==null?void 0:t.type)==="array"&&t!==null&&t!==void 0&&(u=t.items)!==null&&u!==void 0&&u.properties?l=[].concat($()(l),$()(pn(t==null?void 0:t.items))):(t==null?void 0:t.type)==="object"&&t!==null&&t!==void 0&&t.properties&&(l=[].concat($()(l),$()(pn(t))))}),l}var Aa=function(e){var l=e.setFileData,t=e.fileData,i=e.schema,u=i.$id,r=i.props.accept,y=e.onChange,C=(0,v.useRef)(null),S=function(){l(null),y(null)};function b(j){var x=a().get(j,["target","files",0])||a().get(j,["dataTransfer","files",0])||a().get(this,["file","files",0]);x?(l(xe()({},u,x)),y({})):S()}return(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"file",accept:r,style:{display:"none"},ref:C,onChange:b}),t?(0,o.jsxs)("span",{children:[t[u].name,"\xA0",(0,o.jsx)(cn.Z,{onClick:S,style:{cursor:"pointer"}})]}):(0,o.jsx)(te.Z,{onClick:function(){var x;return C==null||(x=C.current)===null||x===void 0?void 0:x.click()},children:"\u9009\u62E9\u6587\u4EF6"})]})},Na=function(e){var l=e.setFileData,t=e.fileData,i=e.schema.props,u=i.accept,r=i.getJSON,y=e.onChange;if(!r)return console.error("\u8BF7\u914D\u7F6E\u6B63\u786E\u7684\u89E3\u6790\u51FD\u6570!!!"),null;var C=(0,v.useRef)(null),S=function(){l(null),y(null)};function b(j){var x=a().get(j,["target","files",0])||a().get(j,["dataTransfer","files",0])||a().get(this,["file","files",0]);r(x).then(function(N){l([x,N]),y({})}).catch(function(N){S(),N.message&&Ie.ZP.warn(N.message)})}return(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"file",accept:u,style:{display:"none"},ref:C,onChange:b}),t?(0,o.jsxs)("span",{children:[a().get(t,[0,"name"]),"\xA0",(0,o.jsx)(cn.Z,{onClick:S,style:{cursor:"pointer"}})]}):(0,o.jsx)(te.Z,{onClick:function(){var x;return C==null||(x=C.current)===null||x===void 0?void 0:x.click()},children:"\u9009\u62E9\u6587\u4EF6"})]})},ka=function(e){var l=e.schema,t=e.disabled,i=t===void 0?!1:t,u=e.formData,r=e.readOnly,y=r===void 0?!1:r,C=e.forwordRef,S=e.onMount,b=S===void 0?function(){}:S,j=e.onSubmit,x=e.submitText,N=e.onCancel,J=e.cancelText,F=e.removeHiddenData,Z=F===void 0?!1:F,D=e.onChange,w=e.extraButtons,B=w===void 0?[]:w,V=e.globalDataFeilds,T=e.widgets,P=T===void 0?{}:T,U=(0,Jn.cI)(),M=ra(),c=(0,v.useState)(null),E=I()(c,2),A=E[0],L=E[1],H=(0,v.useState)(null),re=I()(H,2),oe=re[0],Se=re[1],ye=(0,v.useMemo)(function(){return mn(l)},[l]),ne=(0,v.useMemo)(function(){return xn(l)},[l]),Y=(0,v.useMemo)(function(){return pn(l)},[l]),ue=(0,v.useMemo)(function(){return a().cloneDeep(l)},[l]);(0,v.useEffect)(function(){if(u){var ae=a().cloneDeep(u);a().forEach(ne,function(K){K(ae)}),U.setValues(ae)}},[u]),(0,v.useImperativeHandle)(C,function(){return s()({validate:function(){return U.validateFields().then(function(K){var ee=a().cloneDeep(K);if(oe&&a().forEach(a().get(oe,[1],[]),function(X,le){a().set(ee,le,X)}),a().forEach(ye,function(X){X(ee)}),A){var Q=new FormData;return a().forEach(ee,function(X,le){Q.set(le,X)}),a().forEach(A,function(X,le){Q.set(le,X)}),Q}return ee}).catch(function(K){return K})}},U)},[C,A,oe]);var ce=function(K,ee){var Q=a().cloneDeep(K);if(a().forEach(ye,function(le){le(Q)}),oe&&a().forEach(a().get(oe,[1],[]),function(le,be){a().set(Q,be,le)}),A){var X=new FormData;a().forEach(Q,function(le,be){X.set(be,le)}),a().forEach(A,function(le,be){X.set(be,le)}),j(X,ee)}else j(Q,ee)},ve={"#":function(K){if(!a().isEmpty(K)){var ee=a().cloneDeep(K);if(D&&(a().forEach(Y,function(X){X(ee)}),D(ee)),V){D||a().forEach(Y,function(X){X(ee)});var Q={};a().forEach(V,function(X){a().set(Q,X,a().get(ee,X))}),M(function(X){return s()(s()({},X),Q)})}}}},fe=(0,v.useContext)(Gn),Ve=(0,v.useMemo)(function(){var ae={};return P&&a().forEach(P,function(K,ee){typeof K=="string"?(console.log(K,ee),ae[ee]=fe&&fe[K]||"div"):typeof K=="function"&&(ae[ee]=K)}),ae},[P]);return delete ue.action,(0,o.jsxs)("div",{className:"agul-new-form",children:[(0,o.jsx)(Jn.ZP,{id:"newForm",onMount:b,onFinish:ce,form:U,schema:ue,readOnly:y,disabled:i,watch:ve,removeHiddenData:Z,mapping:{"object:upload":"CustomUpload","object:resolveUpload":"CustomResolveUpload","string:json":"JsonEditor","string:select":"CustomStringSelect","string:asyncSelect":"AsyncSelect","number:select":"CustomNumberSelect","array:strategyTransfer":"StrategyTransfer","array:cascader":"CustomCascader","array:treeSelect":"CustomTreeSelect"},widgets:s()({CustomStringSelect:pa,CustomNumberSelect:wa,JsonEditor:Mt,CodeEditor:Za,StrategyManageSelect:Ut,StrategyManageSelect1:Kt,StrategyTransfer:ca,StrategyScopeSelect:Da,CustomCascader:ya,CustomTreeSelect:Sa,CustomResolveUpload:function(K){return(0,o.jsx)(Na,s()({fileData:oe,setFileData:Se},K))},CustomUpload:function(K){return(0,o.jsx)(Aa,s()({fileData:A,setFileData:L},K))},AsyncSelect:Oa},Ve)}),(0,o.jsxs)("div",{id:"form-botton-box",className:"agul-new-form-button-box",children:[j?(0,o.jsx)(te.Z,{type:"primary",className:"agul-new-form-submit-btn",onClick:function(){U.submit()},children:x||"\u63D0\u4EA4"}):null,N?(0,o.jsx)(te.Z,{className:"agul-new-form-cancel-btn",onClick:function(){N()},children:J||"\u53D6\u6D88"}):null,B]})]})},Ia=(0,v.forwardRef)(function(d,e){return(0,o.jsx)(ka,s()(s()({},d),{},{forwordRef:e}))}),Pa={height:"70vh",overflowY:"auto",padding:"14px"},Ma=function(e){var l=e.width,t=l===void 0?"40vw":l,i=e.title,u=e.onSuccess,r=e.onCancel,y=e.schema,C=e.widgets,S=e.readonly,b=e.open,j=e.formData,x=e.forwordRef;return(0,o.jsx)(Me.Z,{width:t,open:b,title:i,onOk:u,onCancel:r,destroyOnClose:!0,centered:!0,children:(0,o.jsx)("div",{style:Pa,children:(0,o.jsx)(Ia,{schema:y,readOnly:S,ref:x,formData:j,widgets:C})})})},$a=(0,v.forwardRef)(function(d,e){return(0,o.jsx)(Ma,s()(s()({},d),{},{forwordRef:e}))}),jn=m(2587),nt=m(84908),rr="YYYY-MM-DD",Ba="YYYY-MM-DD HH:mm:ss",or="rgl",ir="antd",La=m(94184),Va=m.n(La),Ua=m(48555),Ha=m(91907),Ja=Ha.cd,Wa=function(e){var l=e.columns,t=e.scroll,i=(0,v.useState)(0),u=I()(i,2),r=u[0],y=u[1],C=l.filter(function(Z){var D=Z.width;return!D}).length,S=l.map(function(Z){return Z.width?Z:s()(s()({},Z),{},{width:Math.floor(r/C)})}),b=(0,v.useRef)(),j=(0,v.useState)(function(){var Z={};return Object.defineProperty(Z,"scrollLeft",{get:function(){if(b.current){var w,B;return(w=b.current)===null||w===void 0||(B=w.state)===null||B===void 0?void 0:B.scrollLeft}return null},set:function(w){b.current&&b.current.scrollTo({scrollLeft:w})}}),Z}),x=I()(j,1),N=x[0],J=function(){var D;(D=b.current)===null||D===void 0||D.resetAfterIndices({columnIndex:0,shouldForceUpdate:!0})};(0,v.useEffect)(function(){return J},[r]);var F=function(D,w){var B=w.scrollbarSize,V=w.ref,T=w.onScroll;V.current=N;var P=D.length*54;return(0,o.jsx)(Ja,{ref:b,className:"virtual-grid",columnCount:S.length,columnWidth:function(M){var c=S[M].width;return P>t.y&&M===S.length-1?c-B-1:c},height:t.y,rowCount:D.length,rowHeight:function(){return 54},width:r,onScroll:function(M){var c=M.scrollLeft;T({scrollLeft:c})},children:function(M){var c=M.columnIndex,E=M.rowIndex,A=M.style;return(0,o.jsx)("div",{className:Va()("agul-virtual-table-cell",{"virtual-table-cell-last":c===S.length-1}),style:A,children:S[c].render?S[c].render(D[E][S[c].dataIndex],D[E],E):D[E][S[c].dataIndex]})}})};return(0,o.jsx)(Ua.Z,{onResize:function(D){var w=D.width;y(w)},children:(0,o.jsx)(Ge.Z,s()(s()({},e),{},{className:"agul-virtual-table",columns:S,pagination:!1,components:{body:F}}))})},za=Wa,Ka=m(11382),tn="_______agul_loading_box_id_______",W={show:function(){if(!document.getElementById(tn)){var e=document.createElement("div");e.id=tn,e.className="agul_loading_wrap",document.body.append(e),He.render((0,o.jsx)(Ka.Z,{size:"large"}),e)}},hide:function(){document.getElementById(tn)&&document.body.removeChild(document.getElementById(tn))}},tt={overflow:" hidden",whiteSpace:"nowrap",textOverflow:" ellipsis"},_a=/\{.*\}/g,at=jn.Z.Item,Ya=function(e){var l=e.url,t=e.dataSource,i=e.field,u=e.path,r=e.names,y=e.enums,C=e.tableConfig,S=e.objectConfig,b=e.init,j=b===void 0?function(){}:b,x=e.extraButtons,N=x===void 0?[]:x,J=e.getDetailValue,F=function M(c,E,A,L){if(a().isArray(c)){var H=a().get(A,[E,"childTable"]),re=function(ye){return a().forEach(a().isArray(H==null?void 0:H.columns)?$()(H==null?void 0:H.columns):[],function(ne){var Y=ne.render,ue=ne.format,ce=ne.width;ue?(ne.width=ce||void 0,ne.render=Y||function(ve){return ve?(0,o.jsx)(nt.Z,{title:$e(ve).format(ue),placement:"topLeft",children:(0,o.jsx)("div",{style:s()(s()({},tt),{},{width:ce||void 0}),children:$e(ve).format(ue)})}):"-"}):(ne.width=ce||void 0,ne.render=Y||function(ve){return(0,o.jsx)(nt.Z,{title:ve,placement:"topLeft",children:(0,o.jsx)("div",{style:s()(s()({},tt),{},{width:ce||void 0}),children:ve})})})}),(0,o.jsx)("div",{style:{paddingLeft:70},children:(0,o.jsx)(Ge.Z,{dataSource:ye[H==null?void 0:H.field]||[],columns:a().isArray(H==null?void 0:H.columns)?$()(H==null?void 0:H.columns):[],pagination:!1,size:"small"})})},oe={expandedRowRender:re,defaultExpandedRowKeys:["0"]};return H&&a().forEach(w,function(Se,ye){Se.key=ye.toString()}),(0,o.jsx)(za,{scroll:{y:300},dataSource:c,columns:a().get(A,[E,"columns"],[]),expandable:H?oe:void 0})}else return a().isObject(c)?(0,o.jsxs)("div",{children:[(0,o.jsx)("br",{}),(0,o.jsx)(jn.Z,{column:1,children:a().map(c,function(Se,ye){var ne,Y;return(0,o.jsx)(at,{label:(0,o.jsx)("div",{children:(ne=S[E])===null||ne===void 0?void 0:ne.names[ye]}),children:M(Se,ye,(Y=S[E])===null||Y===void 0?void 0:Y.tableConfig,L)})})})]}):(0,o.jsx)("pre",{children:a().get(L,[E])?a().get(L,[E,c]):a().includes(E,"Time")&&c?$e(c).format(Ba):c})},Z=(0,v.useState)(t||{}),D=I()(Z,2),w=D[0],B=D[1];(0,v.useEffect)(function(){a().isFunction(J)&&J(w)},[w]);var V=(0,$n.TH)(),T=(0,v.useContext)(je),P=a().get(T,"requestHeaders",{})||{},U=function(){var c=a().get(V,["query"]),E=l.replaceAll(_a,a().get(c,[i]));W.show(),se(E,{method:"get",headers:s()({},P)}).then(function(A){W.hide();var L=a().get(A,u);L&&(a().isFunction(j)&&j(L),B(L))}).catch(function(A){W.hide(),B({}),console.error(A.message)})};return(0,v.useEffect)(function(){l&&U()},[l]),(0,o.jsxs)("div",{className:"agul-new-detail",children:[(0,o.jsx)(jn.Z,{column:1,children:a().map(r,function(M,c){return(0,o.jsx)(at,{label:(0,o.jsx)("div",{children:M}),children:F(w[c],c,C,y)})})}),(0,o.jsx)("div",{className:"agul-detail-btn-box",children:a().isArray(N)?N:null})]})},Ga=Ya,Xa={height:"70vh",overflowY:"auto",padding:"14px"},Qa=function(e){var l=e.title,t=e.onCancel,i=e.open,u=e.data,r=u===void 0?{}:u,y=e.width,C=y===void 0?"40vw":y;return(0,o.jsx)(Me.Z,{width:C,open:i,title:l||"\u8BE6\u60C5",onCancel:t,destroyOnClose:!0,footer:null,centered:!0,children:(0,o.jsx)("div",{style:Xa,children:(0,o.jsx)(Ga,s()({},r))})})},qa=(0,v.forwardRef)(function(d,e){return(0,o.jsx)(Qa,s()(s()({},d),{},{forwordRef:e}))}),el=["url"],nl=function(e){var l=e.url,t=sn()(e,el);return(0,o.jsx)("video",s()({autoPlay:!0,controls:!0,src:l},t))},tl=nl,al={height:"70vh",overflowY:"auto",padding:"14px"},ll={width:"100%",height:"100%"},rl=function(e){var l=e.title,t=e.onCancel,i=e.open,u=e.data,r=u===void 0?{}:u,y=e.width,C=y===void 0?"40vw":y;return(0,o.jsx)(Me.Z,{width:C,open:i,title:l||"\u8BE6\u60C5",onCancel:t,destroyOnClose:!0,footer:null,centered:!0,children:(0,o.jsx)("div",{style:al,children:(0,o.jsx)(tl,s()({style:ll},r))})})},ol=rl,il=["url","method","params"],dl=function(e){var l=e.url,t=e.method,i=e.params,u=i===void 0?{}:i,r=sn()(e,il),y=(0,v.useState)(""),C=I()(y,2),S=C[0],b=C[1];return(0,v.useEffect)(function(){if(l){var j={};t==="post"&&(j.method="post",j.body=JSON.stringify(u)),W.show(),fetch(l,j).then(function(x){return x.text()}).then(function(x){W.hide(),b(x)}).catch(function(x){console.error(x.message),b(""),W.hide()})}},[l]),(0,o.jsx)(fn.ZP,s()({value:S||"",readOnly:!0,minHeight:"200px",width:"100%",extensions:[(0,Wn.AV)()]},r))},ul=dl,sl={height:"70vh",overflowY:"auto",padding:"14px"},cl=function(e){var l=e.title,t=e.onCancel,i=e.open,u=e.data,r=u===void 0?{}:u,y=e.width,C=y===void 0?"40vw":y;return(0,o.jsx)(Me.Z,{width:C,open:i,title:l||"\u8BE6\u60C5",onCancel:t,destroyOnClose:!0,footer:null,centered:!0,children:(0,o.jsx)("div",{style:sl,children:(0,o.jsx)(ul,s()({},r))})})},vl=cl,fl=m.p+"static/empty.30d021fe.png",hl=["url","method","path","pagePath","params","columns","rowSelect","operate","forwordRef","needOrder","childTable","height","rowKey","exportBtn","tableExportBoxId","rowConfig","tableOperateBoxId"],ze="agul_new_table_operate_and_export_btn_box",gl={position:"absolute",margin:0,top:-45,right:0},yl=pt.Z.RangePicker,Cl={display:"flex",justifyContent:"flex-end"},Sl=function(e,l){var t=Function;return new t("row","return "+l)(e)},we=/\{.*\}/g,wn={open:!1,onOk:function(){},onCancel:function(){},msg:""},lt={descend:"desc",ascend:"asc"},ml={color:"#00b4e1"},Ze={showSizeChanger:!0,showQuickJumper:!0,position:["bottomRight"],showTotal:function(e){return(0,o.jsxs)("div",{style:{color:"#909399"},children:["\u603B\u5171 ",e," \u6761\u6570\u636E"]})},current:1,pageSize:8,total:0},Be={title:"",open:!1,onSuccess:function(){},onCancel:function(){},readonly:!1,schema:{},formData:{},widgets:{}},Le={title:"",open:!1,onSuccess:function(){},onCancel:function(){},data:{}},bn={title:"",open:!1,onSuccess:function(){},onCancel:function(){},data:{}},En={title:"",open:!1,onSuccess:function(){},onCancel:function(){},data:{}},xl=function(e){var l=e.url,t=l===void 0?"":l,i=e.method,u=i===void 0?"get":i,r=e.path,y=r===void 0?"data":r,C=e.pagePath,S=C===void 0?"pageable":C,b=e.params,j=e.columns,x=j===void 0?[]:j,N=e.rowSelect,J=N===void 0?!1:N,F=e.operate,Z=e.forwordRef,D=Z===void 0?null:Z,w=e.needOrder,B=w===void 0?!1:w,V=e.childTable,T=V===void 0?"":V,P=e.height,U=e.rowKey,M=U===void 0?"id":U,c=e.exportBtn,E=e.tableExportBoxId,A=e.rowConfig,L=e.tableOperateBoxId,H=sn()(e,hl),re=(0,v.useContext)(je),oe=a().get(re,"requestHeaders",{})||{},Se=function(n,h){var p=s()({style:ml,onClick:h},n==null?void 0:n.props);switch(n==null?void 0:n.type){case"add":return(0,o.jsx)(At.Z,s()({},p));case"edit":return(0,o.jsx)(Nt.Z,s()({},p));case"detail":return(0,o.jsx)(Hn.Z,s()({},p));case"delete":return(0,o.jsx)(cn.Z,s()({},p));case"download":return(0,o.jsx)(kt.Z,s()({},p));case"play":return(0,o.jsx)(It.Z,s()({},p));case"file":return(0,o.jsx)(Hn.Z,s()({},p));default:return null}},ye=(0,v.useState)({}),ne=I()(ye,2),Y=ne[0],ue=ne[1],ce=(0,v.useState)(b),ve=I()(ce,2),fe=ve[0],Ve=ve[1];(0,vn.Z)(function(){Ve(s()(s()({},b),Y))},[b]);var ae=(0,v.useState)(Be),K=I()(ae,2),ee=K[0],Q=K[1],X=(0,v.useState)(Le),le=I()(X,2),be=le[0],Ee=le[1],Dn=(0,v.useState)(bn),an=I()(Dn,2),Tn=an[0],Ue=an[1],ln=(0,v.useState)(En),Ke=I()(ln,2),z=Ke[0],G=Ke[1],Ce=(0,v.useState)([]),Oe=I()(Ce,2),he=Oe[0],Ae=Oe[1],De=(0,v.useRef)(),jl=(0,v.useState)(Ze),rt=I()(jl,2),Fn=rt[0],On=rt[1],rn=(0,v.useRef)(Ze);(0,v.useEffect)(function(){rn.current=Fn},[Fn]);var Rn=(0,v.useRef)(""),Ne=function(n,h){if(!t){console.warn("\u8BF7\u7ED9NewTable\u7EC4\u4EF6\u6B63\u786E\u7684url\u5C5E\u6027");return}var p=n.pageSize,f=n.current;h&&delete h.___agul_ui_time____;var O=s()(s()({},h),{},{pageSize:p,pageNumber:f});Rn.current&&a().set(O,"sort",Rn.current);var k=u==="get"?{params:O}:{data:O};W.show(),se(t,s()(s()({method:u},k),{},{headers:s()({},oe)})).then(function(R){W.hide(),Ae(B?a().map(a().get(R,y,[]),function(_,q){return s()(s()({},_),{},{$order:q+1+(f-1)*p})}):a().get(R,y,[])),On(function(_){return s()(s()({},_),{},{pageSize:a().get(R,[S,"pageSize"],8),current:a().get(R,[S,"pageNumber"],1),total:a().get(R,[S,"total"],0)})})}).catch(function(R){console.error(R.message),W.hide(),Ae([]),On(Ze)})};(0,qe.Z)(function(){Ne(Ze,fe),On(Ze)},[fe,t]);var wl=function(n,h,p){var f="";a().isArray(p)?a().forEach(p,function(O){f+="".concat(a().get(O,"field"),":").concat(lt[a().get(O,"order")],";")}):a().get(p,"order")&&(f="".concat(a().get(p,"field"),":").concat(lt[a().get(p,"order")],";")),Rn.current=f,Ne(n,fe)},bl=(0,v.useState)(!1),ot=I()(bl,2),El=ot[0],it=ot[1];(0,v.useEffect)(function(){var g=a().every(he,function(n){return n.checked||!n.checked});g&&it(a().get(he,[0,"checked"]))},[he]);var Dl=function(n,h){Ae(function(p){var f=p.map(function(O,k){return k===n?s()(s()({},O),{},{checked:h}):O});return f})},Tl=function(n){var h=n.target.checked;it(h),Ae(function(p){var f=p.map(function(O){return s()(s()({},O),{},{checked:h})});return f})},Zn=(0,$n.s0)(),Fl=function(n,h){if(Re()(h)!=="object"&&(h={}),n!=null&&n.routerPath){var p=n!=null&&n.field?"".concat(n==null?void 0:n.routerPath,"?").concat(n==null?void 0:n.field,"=").concat(h[n==null?void 0:n.field]):n==null?void 0:n.routerPath;Zn(p);return}var f=function(){var R;De==null||(R=De.current)===null||R===void 0||R.validate().then(function(_){var q;if(_ instanceof FormData||!(_!=null&&_.errors)||!(_!=null&&(q=_.errors)!==null&&q!==void 0&&q.length)){var ie=n==null?void 0:n.url.replaceAll(we,h[n==null?void 0:n.field]);W.show(),se(ie,{method:n!=null&&n.method?n==null?void 0:n.method:"post",data:_,headers:s()({},oe)}).then(function(){W.hide(),Fe.success({title:"\u64CD\u4F5C\u6210\u529F"}),Q(Be),Ne(rn.current,fe)}).catch(function(de){W.hide(),console.error(de.message)})}}).catch(function(_){})},O={};n!=null&&n.field&&(O[n==null?void 0:n.field]=h[n==null?void 0:n.field]),Q({title:n==null?void 0:n.text,open:!0,onSuccess:f,onCancel:function(){return Q(Be)},readonly:!1,schema:n==null?void 0:n.schema,formData:O,widgets:n==null?void 0:n.widgets})},Ol=function(n,h){if(Re()(h)!=="object"&&(h={}),n!=null&&n.routerPath){Zn("".concat(n==null?void 0:n.routerPath,"?").concat(n==null?void 0:n.field,"=").concat(h[n==null?void 0:n.field]));return}var p=function(){var k;De==null||(k=De.current)===null||k===void 0||k.validate().then(function(R){var _;if(R instanceof FormData||!(R!=null&&R.errors)||!(R!=null&&(_=R.errors)!==null&&_!==void 0&&_.length)){var q=we.test(n==null?void 0:n.url)?n==null?void 0:n.url.replaceAll(we,h[n==null?void 0:n.field]):n==null?void 0:n.url;W.show(),se(q,{method:n!=null&&n.method?n==null?void 0:n.method:"put",data:R,headers:s()({},oe)}).then(function(){W.hide(),Fe.success({title:"\u64CD\u4F5C\u6210\u529F"}),Q(Be),Ne(rn.current,fe)}).catch(function(ie){W.hide(),console.error(ie.message)})}}).catch(function(R){})};if(n!=null&&n.detailUrl){var f=n==null?void 0:n.detailUrl.replaceAll(we,h[n==null?void 0:n.field]);W.show(),se(f,{method:"get",headers:s()({},oe)}).then(function(O){var k=O.data;k||(k={}),n!=null&&n.field&&(k[n==null?void 0:n.field]=h[n==null?void 0:n.field]),W.hide(),Q({title:n==null?void 0:n.text,open:!0,onSuccess:p,onCancel:function(){return Q(Be)},readonly:!1,schema:n==null?void 0:n.schema,widgets:n==null?void 0:n.widgets,formData:k})}).catch(function(O){W.hide(),console.error(O.message)})}else Q({title:n==null?void 0:n.text,open:!0,onSuccess:p,onCancel:function(){return Q(Be)},readonly:!1,schema:n==null?void 0:n.schema,widgets:n==null?void 0:n.widgets,formData:h})},Rl=function(n,h){if(Re()(h)!=="object"&&(h={}),n!=null&&n.routerPath){Zn("".concat(n==null?void 0:n.routerPath,"?").concat(n==null?void 0:n.field,"=").concat(h[n==null?void 0:n.field]));return}if(n!=null&&n.url){var p=n==null?void 0:n.url.replaceAll(we,h[n==null?void 0:n.field]);W.show(),se(p,{method:"get",headers:s()({},oe)}).then(function(f){W.hide(),Ee({title:n==null?void 0:n.text,open:!0,onSuccess:function(){return Ee(Le)},onCancel:function(){return Ee(Le)},data:s()(s()({},n),{},{dataSource:a().get(f,y),url:null})})}).catch(function(f){W.hide(),Ee(Le),console.error(f.message)})}else Ee({title:n==null?void 0:n.text,open:!0,onSuccess:function(){return Ee(Le)},onCancel:function(){return Ee(Le)},data:s()(s()({},n),{},{dataSource:h})})},Zl=(0,v.useState)(wn),dt=I()(Zl,2),on=dt[0],An=dt[1],Al=function(n,h){Re()(h)!=="object"&&(h={}),An({msg:"\u786E\u5B9A\u8981".concat(n==null?void 0:n.text,"\u8BE5\u9879\u5417\uFF1F"),open:!0,onOk:function(){var f=n==null?void 0:n.url.replaceAll(we,h[n==null?void 0:n.field]),O={headers:s()({},oe),method:n!=null&&n.method?n==null?void 0:n.method:"delete"};["put","post"].includes(n==null?void 0:n.method)&&!we.test(n==null?void 0:n.url)&&a().set(O,"data",xe()({},n==null?void 0:n.field,h[n==null?void 0:n.field])),W.show(),se(f,O).then(function(){Fe.success({title:"\u64CD\u4F5C\u6210\u529F"}),An(wn),Ne(Ze,fe),W.hide()}).catch(function(k){W.hide(),console.error(k.message)})},onCancel:function(){return An(wn)}})},Nl=function(n,h){Re()(h)!=="object"&&(h={});var p,f={headers:s()({"x-user-id":"1"},n==null?void 0:n.headers)};if(n!=null&&n.downloadUrl&&(!(n!=null&&n.method)||(n==null?void 0:n.method)==="get")?p=n==null?void 0:n.downloadUrl.replaceAll(we,h[n==null?void 0:n.field]):n!=null&&n.field&&(p=h[n==null?void 0:n.field]),!p){Ie.ZP.warn("\u8BE5\u8D44\u6E90\u5730\u5740\u65E0\u6548!");return}W.show(),(n==null?void 0:n.method)==="post"&&(f.method="post",f.body=JSON.stringify(xe()({},n==null?void 0:n.field,h[n==null?void 0:n.field])));var O;fetch(p,f).then(function(k){var R,_,q,ie=k.headers.get("Content-Disposition"),de=typeof ie=="string"?ie.split(";")[1]:(R=h)===null||R===void 0?void 0:R.filename,me="";return de&&(me=de.split("fileName=")[1]?de.split("fileName=")[1]:de.split("filename=")[1]),me=me||((_=h)===null||_===void 0?void 0:_.filename)||((q=h)===null||q===void 0?void 0:q.fileName),O=decodeURIComponent(me),k.blob()}).then(function(k){if(W.hide(),!O){Fe.error({title:"\u4E0B\u8F7D\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u5F00\u53D1\u4EBA\u5458\uFF01"});return}var R=document.createElement("a"),_=window.URL.createObjectURL(k);R.href=_,R.download=O,R.target="_blank",R.click(),window.URL.revokeObjectURL(_)}).catch(function(k){W.hide(),console.error(k.message)})},kl=function(n,h){if(Re()(h)!=="object"&&(h={}),!h[n==null?void 0:n.field]){Ie.ZP.warn("\u8BE5\u89C6\u9891\u8D44\u6E90\u65E0\u6548!");return}Ue({title:n==null?void 0:n.text,open:!0,onSuccess:function(){return Ue(bn)},onCancel:function(){return Ue(bn)},data:s()(s()({},n),{},{url:h[n==null?void 0:n.field]})})},Il=function(n,h){Re()(h)!=="object"&&(h={});var p;if(n!=null&&n.downloadUrl&&(!(n!=null&&n.method)||(n==null?void 0:n.method)==="get")?p=n==null?void 0:n.downloadUrl.replaceAll(we,h[n==null?void 0:n.field]):n!=null&&n.field&&(p=h[n==null?void 0:n.field]),!p){Ie.ZP.warn("\u8BE5\u8D44\u6E90\u5730\u5740\u65E0\u6548!");return}G({title:n==null?void 0:n.text,open:!0,onSuccess:function(){return G(En)},onCancel:function(){return G(En)},data:{method:n==null?void 0:n.method,params:xe()({},n==null?void 0:n.field,h[n==null?void 0:n.field]),url:p}})},ut=function(n,h){switch(n==null?void 0:n.type){case"add":Fl(n,h);return;case"edit":Ol(n,h);return;case"detail":Rl(n,h);return;case"delete":Al(n,h);return;case"download":Nl(n,h);return;case"play":kl(n,h);return;case"file":Il(n,h);return;default:return}},Pl=(0,v.useMemo)(function(){var g=function(h){return a().forEach(a().isArray(T==null?void 0:T.columns)?$()(T==null?void 0:T.columns):[],function(p){var f=p.render,O=p.format;O&&(p.render=f||function(k){return k?$e(k).format(O):"-"})}),(0,o.jsx)("div",{style:{paddingLeft:70},children:(0,o.jsx)(Ge.Z,{dataSource:h[T==null?void 0:T.field]||[],columns:a().isArray(T==null?void 0:T.columns)?$()(T==null?void 0:T.columns):[],pagination:!1,size:"small"})})};return{expandedRowRender:g,defaultExpandedRowKeys:["0"]}},[T]);T&&a().forEach(he,function(g,n){g.key=n.toString()}),(0,v.useImperativeHandle)(D,function(){return In},[he,D]);var _e=function(){Ve(s()(s()({},b),Y))},Ml=function(n,h){var p=n.type,f=n.field,O=n.treeData,k=n.props,R=f||h;switch(p){case"input":return function(q){var ie=q.close;return(0,o.jsxs)("div",{style:{padding:12,overflow:"hidden"},children:[(0,o.jsx)(Xe.Z,s()({allowClear:!0,style:{width:150,display:"flex"},value:Y[R],onChange:function(me){return ue(function(Te){return s()(s()({},Te),{},xe()({},R,me.target.value))})}},k)),(0,o.jsx)(te.Z,{type:"primary",size:"small",onClick:function(){_e(),ie()},style:{marginTop:14,float:"right"},children:"\u786E\u8BA4"})]})};case"select":return function(q){var ie=q.close;return(0,o.jsxs)("div",{style:{padding:12,overflow:"hidden"},children:[(0,o.jsx)(pe.Z,s()({allowClear:!0,style:{width:150,display:"block"},value:Y[R],onChange:function(me){return ue(function(Te){return s()(s()({},Te),{},xe()({},R,me))})},options:O},k)),(0,o.jsx)(te.Z,{type:"primary",size:"small",onClick:function(){_e(),ie()},style:{marginTop:14,float:"right"},children:"\u786E\u8BA4"})]})};case"checkbox":return function(q){var ie=q.close;return(0,o.jsxs)("div",{style:{padding:12,overflow:"hidden"},children:[(0,o.jsx)(Pe.Z.Group,s()({style:{width:150,display:"block"},options:O,value:Y[R],onChange:function(me){return ue(function(Te){return s()(s()({},Te),{},xe()({},R,me))})}},k)),(0,o.jsx)(te.Z,{type:"primary",size:"small",onClick:function(){_e(),ie()},style:{marginTop:14,float:"right"},children:"\u786E\u8BA4"})]})};case"dateRange":var _=Y[a().get(f,[0])?a().get(f,[0]):"startTime"]&&Y[a().get(f,[1])?a().get(f,[1]):"endTime"]?[We()(Y[a().get(f,[0])?a().get(f,[0]):"startTime"]),We()(Y[a().get(f,[1])?a().get(f,[1]):"endTime"])]:[];return function(q){var ie=q.close;return(0,o.jsxs)("div",{style:{padding:12,overflow:"hidden"},children:[(0,o.jsx)(yl,s()({allowClear:!0,style:{display:"flex"},value:_,onChange:function(me,Te){a().isEmpty(a().pickBy(Te))?ue(function(Ye){return delete Ye[a().get(f,[0])?a().get(f,[0]):"startTime"],delete Ye[a().get(f,[1])?a().get(f,[1]):"endTime"],s()({},Ye)}):ue(function(Ye){var un;return s()(s()({},Ye),{},(un={},xe()(un,a().get(f,[0])?a().get(f,[0]):"startTime",We()(Te[0]).utcOffset(8).format()),xe()(un,a().get(f,[1])?a().get(f,[1]):"endTime",We()(Te[1]).utcOffset(8).format()),un))})}},k)),(0,o.jsx)(te.Z,{type:"primary",size:"small",onClick:function(){_e(),ie()},style:{marginTop:14,float:"right"},children:"\u786E\u8BA4"})]})};default:return function(){return(0,o.jsxs)("div",{style:{padding:12,overflow:"hidden"},children:[(0,o.jsx)(Xe.Z,{value:Y[R],onChange:function(ie){return ue(function(de){return s()(s()({},de),{},xe()({},R,ie.target.value))})}}),(0,o.jsx)(te.Z,{type:"primary",size:"small",onClick:function(){return _e()},style:{marginTop:14,float:"right"},children:"\u786E\u8BA4"})]})}}},$l=(0,v.useState)(!1),st=I()($l,2),Bl=st[0],dn=st[1],Ll=(0,v.useState)({old:a().map(a().isArray(x)?$()(x):[],function(g){return g.dataIndex||g.key}),new:a().map(a().isArray(x)?$()(x):[],function(g){return g.dataIndex||g.key})}),ct=I()(Ll,2),Nn=ct[0],kn=ct[1],Vl=function(){kn(function(n){return s()(s()({},n),{},{old:n.new||[]})}),dn(!1)},vt=function(){kn(function(n){return s()(s()({},n),{},{new:n.old||[]})}),dn(!1)},Ul=(0,v.useMemo)(function(){return a().map(a().filter(A||[],function(g){return a().includes(Nn.old||[],(g==null?void 0:g.dataIndex)||(g==null?void 0:g.key))}),function(g){return g.dataIndex||g.key})},[Nn.old]),ke=A?a().filter(a().isArray(x)?$()(x):[],function(g){return a().includes(Ul,(g==null?void 0:g.dataIndex)||(g==null?void 0:g.key))}):a().isArray(x)?$()(x):[];B&&!a().some(ke,{dataIndex:"$order"})&&ke.unshift({title:"\u7F16\u53F7",dataIndex:"$order"}),J&&!a().some(ke,{dataIndex:"$rowSelect"})&&ke.unshift({title:(0,o.jsx)(Pe.Z,{checked:El,onChange:Tl}),width:100,fixed:"left",dataIndex:"$rowSelect",render:function(n,h,p){return(0,o.jsx)(Pe.Z,{checked:h.checked,onChange:function(O){var k=O.target.checked;return Dl(p,k)}})}});var In={checkedData:a().filter(he,{checked:!0}),reload:function(){Ne(Ze,fe)},update:function(){Ne(rn.current,fe)}},Pn=(0,v.useContext)(Gn);F&&!a().some(ke,{dataIndex:"$operate"})&&ke.push({title:"\u64CD\u4F5C",dataIndex:"$operate",fixed:"right",width:(F==null?void 0:F.mode)==="icon"?a().get(F,"buttons.length",0)*20:a().reduce(a().get(F,"buttons"),function(g,n){return g+(a().get(n,"text.length")?a().get(n,"text.length")*14:60)+16},0)+32,render:function(n,h){var p=a().filter((F==null?void 0:F.buttons)||[],function(f){return!(f!=null&&f.condition)||Sl(h,f.condition)});return h?(0,o.jsx)(o.Fragment,{children:a().map(p,function(f,O){return(0,o.jsxs)(o.Fragment,{children:[(f==null?void 0:f.type)==="custom"?typeof(f==null?void 0:f.widget)=="string"?Pn&&Pn[f==null?void 0:f.widget]?(0,v.createElement)(Pn[f==null?void 0:f.widget],s()(s()({},In),{},{row:h})):f==null?void 0:f.widget:typeof(f==null?void 0:f.widget)=="function"?(0,v.createElement)(f==null?void 0:f.widget,s()(s()({},In),{},{row:h})):null:(F==null?void 0:F.mode)==="icon"?Se(f,a().debounce(function(){return ut(f,h)},200)):(0,o.jsx)("a",s()(s()({onClick:a().debounce(function(){return ut(f,h)},200)},f==null?void 0:f.props),{},{children:f==null?void 0:f.text})),O===a().get(p,"length",0)-1?null:(0,o.jsx)(jt.Z,{type:"vertical"})]})})}):null}});var Hl=a().map(ke,function(g){var n=g.render,h=g.format,p=g.otherFilters;return p&&(g.filterDropdown=Ml(p,(g==null?void 0:g.dataIndex)||(g==null?void 0:g.key))),h?s()(s()({},g),{},{render:n||function(f){return f?$e(f).format(h):"-"}}):s()({},g)}),ft=function(){var n={headers:s()({"x-user-id":"1"},c==null?void 0:c.headers)};W.show();var h=c!=null&&c.params?c==null?void 0:c.params:{};h=s()(s()({},h),fe),(c==null?void 0:c.method)==="post"&&(n.method="post",n.body=JSON.stringify(h));var p;fetch(c==null?void 0:c.url,n).then(function(f){var O=f.headers.get("Content-Disposition"),k=typeof O=="string"?O.split(";")[1]:c==null?void 0:c.filname,R="";return k&&(R=k.split("fileName=")[1]?k.split("fileName=")[1]:k.split("filename=")[1]),R=R||(c==null?void 0:c.filename)||(c==null?void 0:c.fileName),p=decodeURIComponent(R),f.blob()}).then(function(f){if(W.hide(),!p){Fe.error({title:"\u6587\u4EF6\u540D\u7F3A\u5931\u3001\u4E0B\u8F7D\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u5F00\u53D1\u4EBA\u5458\uFF01"});return}var O=document.createElement("a"),k=window.URL.createObjectURL(f);O.href=k,O.download=p,O.target="_blank",O.click(),window.URL.revokeObjectURL(k)}).catch(function(f){W.hide(),console.error(f.message)})};return(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)(Me.Z,{width:"40vw",open:Bl,title:"\u81EA\u5B9A\u4E49\u5217\u8868\u5B57\u6BB5",onCancel:vt,destroyOnClose:!0,centered:!0,footer:(0,o.jsx)("div",{style:Cl,children:(0,o.jsxs)(wt.Z,{children:[(0,o.jsx)(te.Z,{onClick:vt,children:"\u53D6\u6D88"}),(0,o.jsx)(te.Z,{type:"primary",onClick:Vl,children:"\u786E\u8BA4"})]})}),children:(0,o.jsx)(Pe.Z.Group,{value:Nn.new||[],onChange:function(n){return kn(function(h){return s()(s()({},h),{},{new:n})})},children:(0,o.jsx)(bt.Z,{children:a().map(A,function(g){return(0,o.jsx)(Et.Z,{span:24,children:(0,o.jsx)(Pe.Z,{value:(g==null?void 0:g.dataIndex)||(g==null?void 0:g.key),style:{marginBottom:14},disabled:!!(g!=null&&g.disabled),children:g==null?void 0:g.title})})})})})}),(0,o.jsx)("div",{id:ze,style:gl}),c?E&&document.getElementById(E)?(0,He.createPortal)((0,o.jsx)(te.Z,{type:"primary",onClick:function(){return ft()},children:(c==null?void 0:c.text)||"\u5BFC\u51FA"}),document.getElementById(E)):document.getElementById(ze)?(0,He.createPortal)((0,o.jsx)(te.Z,{type:"primary",onClick:function(){return ft()},children:(c==null?void 0:c.text)||"\u5BFC\u51FA"}),document.getElementById(ze)):null:null,A?L&&document.getElementById(L)?(0,He.createPortal)((0,o.jsx)(te.Z,{type:"primary",onClick:function(){dn(!0)},children:"\u914D\u7F6E\u5217"}),document.getElementById(L)):document.getElementById(ze)?(0,He.createPortal)((0,o.jsx)(te.Z,{type:"primary",onClick:function(){dn(!0)},style:{marginLeft:c&&E&&document.getElementById(E)?14:0},children:"\u914D\u7F6E\u5217"}),document.getElementById(ze)):null:null,(0,o.jsx)(Ge.Z,s()({scroll:{x:"max-content",y:P},dataSource:he,columns:Hl,pagination:t?Fn:!1,onChange:t?wl:function(){},expandable:T?Pl:void 0,rowKey:M,locale:{emptyText:(0,o.jsxs)("div",{style:{textAlign:"center",padding:"60px 0"},children:[(0,o.jsx)("img",{style:{width:320,height:220},src:fl,alt:""}),(0,o.jsx)("div",{style:{fontSize:14,color:"#888",textAlign:"center"},children:"\u6682\u65E0\u6570\u636E"})]})}},H)),(0,o.jsx)($a,s()(s()({},ee),{},{ref:De})),(0,o.jsx)(qa,s()({},be)),(0,o.jsx)(ol,s()({},Tn)),(0,o.jsx)(vl,s()({},z)),(0,o.jsxs)(Me.Z,s()(s()({destroyOnClose:!0,width:"40vw",title:"\u6E29\u99A8\u63D0\u793A",footer:null},on),{},{children:[(0,o.jsx)("div",{style:{fontSize:13,color:"#575757",textAlign:"center"},children:on.msg}),(0,o.jsxs)("div",{style:{margin:"30px auto 14px",width:200,display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(te.Z,{onClick:function(){return on.onCancel()},children:"\u53D6\u6D88"}),(0,o.jsx)(te.Z,{onClick:function(){return on.onOk()},type:"primary",children:"\u786E\u8BA4"})]})]}))]})},pl=(0,v.forwardRef)(function(d,e){return(0,o.jsx)(xl,s()(s()({},d),{},{forwordRef:e}))})},24654:function(){},18685:function(){},20067:function(){},55382:function(){},72095:function(){},61219:function(){}}]);
